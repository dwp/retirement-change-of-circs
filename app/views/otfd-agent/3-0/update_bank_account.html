{% extends "layout_noback_nowelsh" %}

{% block pageTitle %}
GOV.UK Prototype Kit
{% endblock %}

{% block header %}
{% include "includes/cookie-banner.html" %}
{# Set serviceName in config.js. #}

{% include 'includes/_header-nav-tasks.html' %}

{% block headEnd %}


{% endblock %}

{% block content %}

{% endblock %}



<div class="govuk-width-container">
  <nav class="hmrc-language-select" aria-label="Language switcher">
    <a href="task_list.html" class="govuk-back-link">Back</a>
    <!-- <ul class="hmrc-language-select__list">
      <li class="hmrc-language-select__list-item">
        <span aria-current="true">English</span>
      </li>
      <li class="hmrc-language-select__list-item">
        <a href="?cy" hreflang="cy" lang="cy" rel="alternate" class="govuk-link" data-journey-click="link - click:lang-select:Cymraeg">
          <span class="govuk-visually-hidden">Newid yr iaith ir Gymraeg</span>
          <span aria-hidden="true">Cymraeg</span>
        </a>
      </li>
    </ul> -->
  </nav> 
   

  <main class="govuk-main-wrapper">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        {% include 'includes/_bar.html' %}

        <p class="govuk-body">
          This record is managed in PSCS
        </p>

        <p class="govuk-body">
          This pensioner has requested a change to their payment details. Review the request and update the details in CAM or PSCS.<br>
        </p>

        <p class="govuk-body">
          <strong>Source:</strong> Online Manage your State Pension (MySP) request <br>
          <strong>Receipt email sent to:</strong> ross.mcdonald@test.com
        </p>

        

        <h1 class="govuk-heading-l">1. Find them in CAM or PSCS</h1>

        <table class="govuk-table govuk-!-margin-bottom-9">
          <caption class="govuk-table__caption govuk-table__caption--m">Citizen details</caption>
        

          <tbody class="govuk-table__body">
            <tr class="govuk-table__row">
              <th scope="row" class="govuk-table__header">Name</th>
              <td class="govuk-table__cell">Ross Mcdonald</td>
              <td class="govuk-table__cell" style="text-align: right;"><button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">Copy <span class="govuk-visually-hidden">name</span>text</button></td> 
            </tr>
            <tr class="govuk-table__row">
              <th scope="row" class="govuk-table__header">Nino</th>
              <td class="govuk-table__cell">QQ 12 34 56 X</td>
              <td class="govuk-table__cell" style="text-align: right;"><button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">Copy <span class="govuk-visually-hidden">Nino</span>number</button></td> 
              </tr>
            <tr class="govuk-table__row">
              <th scope="row" class="govuk-table__header">Home address</th>
              <td class="govuk-table__cell">
                1 Square Street<br>
                York<br>
                YO3 1SQ</td>
                <td class="govuk-table__cell" scope="col"> <a class="govuk-link" href="#"><span class="govuk-visually-hidden"></span></td>
                </tr>
          </tbody>
        </table>

        <h1 class="govuk-heading-l">2. Enter new method of payment (SP MOP) details  </h1>
        

        <table class="govuk-table govuk-!-margin-bottom-9">
          <tr class="govuk-table__row">
            <caption class="govuk-table__caption govuk-table__caption--m">New account details: <body><strong class="govuk-tag govuk-tag--blue">Verified</strong></body></caption>
          </tr>
          <tbody class="govuk-table__body">
            <tr class="govuk-table__row">
              <th scope="row" class="govuk-table__header">Name on the account</th>
              <td class="govuk-table__cell">Ross Mcdonald</td>
              <td class="govuk-table__cell" style="text-align: right;"><button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">Copy <span class="govuk-visually-hidden">Name</span>text</button></td> 
            </tr>
            <tr class="govuk-table__row">
              <th scope="row" class="govuk-table__header">Sort code</th>
              <td class="govuk-table__cell">309430</td>
              <td class="govuk-table__cell" style="text-align: right;"><button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">Copy <span class="govuk-visually-hidden">name</span>number</button></td> 
            </tr>
            <tr class="govuk-table__row">
              <th scope="row" class="govuk-table__header">Account number</th>
              <td class="govuk-table__cell">00733445</td>
              <td class="govuk-table__cell" style="text-align: right;"><button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">Copy <span class="govuk-visually-hidden">account</span>number</button></td> 
            </tr>
            <tr class="govuk-table__row">
              <th scope="row" class="govuk-table__header">Building society roll number</th>
              <td class="govuk-table__cell">1992738467</td>
              <td class="govuk-table__cell" style="text-align: right;"><button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">Copy <span class="govuk-visually-hidden">building society roll </span>number</button></td> 
            </tr>
          </tbody>
        </table>
          
        <h1 class="govuk-heading-l">3. Add a note in CAM contact history about the action you have taken</h1>
        <table class="govuk-table govuk">     
          <tbody class="govuk-table__body">
            <tr class="govuk-table__row">
              <th scope="row" class="govuk-table__header">Note text</th>
              <td class="govuk-table__cell">SP MOP details changed via MySP request</td>
              <td class="govuk-table__cell" style="text-align: right;"><button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">Copy <span class="govuk-visually-hidden">note</span>text</button></td> 
            </tr>
          </tbody>
        </table>

        <div class="govuk-form-group govuk-!-margin-bottom-9">
          <!-- <fieldset class="govuk-fieldset" aria-describedby="waste-hint">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            </legend>
            <div id="waste-hint" class="govuk-hint">
             Add a note in CAM contact history that the bank details were changed via a MySP request
            </div> -->
            <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="paymentFrequency" name="paymentFrequency" type="checkbox" value="paymentFrequency">
                <label class="govuk-label govuk-checkboxes__label" for="paymentFrequency">
                  I have updated the contact history in CAM
                </label>
              </div>              
            </div>
          </fieldset>
        </div> 
        
        <form class="form" action="/pscs-agent-action-3" method="post">
          <div class="govuk-form-group">
            <fieldset class="govuk-fieldset">
              <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                <h1 class="govuk-fieldset__heading">
                  4. Select which action you have taken
                </h1>
              </legend>
              <!-- <p class="govuk-body">
                Select which action you have taken.
              </p> -->
              <div class="govuk-radios" data-module="govuk-radios">
                <div class="govuk-radios__item">
                  <input class="govuk-radios__input" id="pscs-agent-action" name="pscs-agent-action" type="radio" value="Yes" {{ checked("pscs-agent-action", "Yes") }}>
                  <label class="govuk-label govuk-radios__label" for="pscs-agent-action">
                    Updated the method of payment 
                  </label>
                  <div id="signIn-item-hint" class="govuk-hint govuk-radios__hint">
                    This will send a confirmation email to the citizen.
                  </div>
                </div>
                <div class="govuk-radios__item">
                  <input class="govuk-radios__input" id="pscs-agent-action" name="pscs-agent-action" type="radio" value="No" {{ checked("pscs-agent-action", "No") }}>
                  <label class="govuk-label govuk-radios__label" for="pscs-agent-action">
                    Escalated or transferred the task 
                  </label>
                  <div id="signIn-item-hint" class="govuk-hint govuk-radios__hint">
                    Following normal BAU process.
                  </div>
                </div>
                <div class="govuk-radios__item">
                  <input class="govuk-radios__input" id="pscs-agent-action" name="pscs-agent-action" type="radio" value="No2" {{ checked("pscs-agent-action", "No") }}>
                  <label class="govuk-label govuk-radios__label" for="pscs-agent-action">
                    No action required
                  </label>
                </div>
              </div>
            </fieldset>
          </div>

          <button class="govuk-button" data-module="govuk-button">
            Continue
          </button>
          <!-- <a href="task_list_already_actioned.html" button type="submit" style="margin-left: 2%" class="govuk-button govuk-button--secondary">
            The task has already been actioned
          </a> -->
          <!-- <a href="task_list_no_action_needed.html" button type="submit" style="margin-left:2%" class="govuk-button govuk-button--secondary">
            No action required
          </a> -->
          <p class="govuk-body">
            <a href="task_list_returned.html" class="govuk-link">Return this task to queue</a>
          </p>
          
        </form>
      </div>
    </div>
  </div>     
{% endblock %}

{% block pageScripts %}
      {# import clipboard min js - this could be moved to global? #}
      <script src="/public/javascripts/clipboard.min.js"></script>
      <script>

        /*
                <button class="app-copy-button" data-clipboard-text="Ross Mcdonald">Copy text</button> 

                Any button with a class app-copy-button will get the data-clipboard-text copied 
        */

        /*
            Notes:

            1. The button is currently generic, so will give no real context for a screen reader - i.e copy what text?

            2. I've not attempted to attach any screen reader feedback, assume they should be informed of a the text change

            3. It resets after 1 second
        */

        // make a new clipbaord based on the class
        var clipboard = new ClipboardJS('.app-copy-button')

        // do some things when sucessfull
        clipboard.on('success', (event) => this.successAction(event))

        // these are lifts from govuk copy button
        function successAction(event) {
          event.trigger.textContent = 'Text copied';
          // Reset button after 1 second
          resetAction(event, 4000)
        }

      function resetAction(event, timeout = 0) {
          event.clearSelection()

          if (this.resetTimeoutId) {
            window.clearTimeout(this.resetTimeoutId)
          }

          this.resetTimeoutId = window.setTimeout(() => {
            event.trigger.textContent = 'Copy text';
          }, timeout)
        }
      </script>
{% endblock %}

